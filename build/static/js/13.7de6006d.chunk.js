(this["webpackJsonpthumbshot-fe"]=this["webpackJsonpthumbshot-fe"]||[]).push([[13],{1036:function(e,t,a){"use strict";a.r(t);var c=a(6),n=a.n(c),s=a(19),r=a(61),i=a(0),o=a(40),l=a.n(o),d=a(393),j=a(1033),u=a(137),b=a(44),m=a(26),h=a(13),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"},v=a(29),p=function(e,t){return i.createElement(v.a,Object(h.a)(Object(h.a)({},e),{},{ref:t,icon:O}))};p.displayName="ArrowDownOutlined";var x=i.forwardRef(p),f=a(152),g=a(24),_=a.n(g),k=a(846),N=a(911),w=a.n(N),S=a(135),y=a(27),C=a(154),R=a(198),A=a(1),M=l.a.bind(w.a);t.default=function(){var e=Object(b.c)().account,t=(Object(m.g)(),Object(R.a)()),a=Object(f.a)(),c=a.assets,o=a.runeList,l=Object(m.i)().id,h=Number(l),O=Object(k.b)(h),v=O.epoch,p=O.totalEpoch,g=O.userData,N=O.totalScore,w=(O.scoreLine,O.epochReward),E=O.contractAddress,F=O.effectiveScore,L=Object(i.useState)(!1),P=Object(r.a)(L,2),D=P[0],B=P[1],z=function(e){var t=Object(R.a)();return Object(i.useMemo)((function(){return Object(C.c)(e,t)}),[e,t])}(Object(y.a)(E)),G=Object(k.a)(z).onReward,I=Object(k.d)(z).onStake,T=Object(k.e)(z).onUnstake,U=Object(S.d)((null===g||void 0===g?void 0:g.effectiveScore)?new _.a(g.effectiveScore):S.b,0),K=N>0?new _.a(U).dividedBy(F).multipliedBy(w).toFormat(0):0,Q=Object(S.c)(new _.a((null===g||void 0===g?void 0:g.poolScore)||S.b),0),q=Object(S.c)(new _.a((null===g||void 0===g?void 0:g.pendingReward)||S.b),18),J=function(){var e=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(!0),e.next=4,G();case 4:e.sent?(d.a.success({message:"You can now stake pool"}),B(!1)):(d.a.error({message:"error",description:"Please try again. Confirm the transaction and make sure you are paying enough gas!"}),B(!1)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),B(!1),d.a.error({message:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),V=Object(i.useState)(0),W=Object(r.a)(V,2),X=W[0],Y=W[1],Z=Object(i.useMemo)((function(){return 0===X?(null===g||void 0===g?void 0:g.poolRunes)||[]:(o||[]).filter((function(e){return+e.score>=+O.sousId}))}),[X,o,null===g||void 0===g?void 0:g.poolRunes]),H=function(e){Y(e)},$=Object(i.useState)(!1),ee=Object(r.a)($,2),te=ee[0],ae=ee[1],ce=function(){var t=Object(s.a)(n.a.mark((function t(){var a,c;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(y.a)(E),t.next=3,Object(C.a)().methods.isApprovedForAll(e,a).call();case 3:c=t.sent,ae(c);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ne=Object(i.useState)(!1),se=Object(r.a)(ne,2),re=se[0],ie=se[1],oe=function(){var a=Object(s.a)(n.a.mark((function a(){var c;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,ie(!0),c=Object(y.a)(E),a.next=5,Object(C.a)(t).methods.setApprovalForAll(c,!0).send({from:e,gas:5e6});case 5:return a.next=7,ce();case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),d.a.error({message:null===a.t0||void 0===a.t0?void 0:a.t0.message});case 12:return a.prev=12,ie(!1),a.finish(12);case 15:case"end":return a.stop()}}),a,null,[[0,9,12,15]])})));return function(){return a.apply(this,arguments)}}();Object(i.useEffect)((function(){e&&Object(y.a)(E)&&ce()}),[e,E]);var le=Object(i.useState)(!1),de=Object(r.a)(le,2),je=de[0],ue=de[1],be=function(){var e=Object(s.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ue(!0),e.next=4,I(t);case 4:ue(!1),d.a.success({message:"stake success"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),ue(!1),d.a.error({message:"error",description:"Please try again. Confirm the transaction and make sure you are paying enough gas!"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),me=Object(i.useState)(!1),he=Object(r.a)(me,2),Oe=he[0],ve=he[1],pe=function(){var e=Object(s.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ve(!0),e.next=4,T(t);case 4:ve(!1),d.a.success({message:"unStake success"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),ve(!1),d.a.error({message:"error",description:"Please try again. Confirm the transaction and make sure you are paying enough gas!"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsx)("div",{className:M("staking-container"),children:Object(A.jsxs)("div",{className:M("mobile"),children:[Object(A.jsx)("div",{className:M("img")}),Object(A.jsxs)("div",{className:M("progress-info"),children:[Object(A.jsx)("div",{className:M("title"),children:"Epoch"}),Object(A.jsxs)("div",{className:M("num"),children:[Object(A.jsx)("strong",{children:v}),"/",p]})]}),Object(A.jsx)(j.a,{strokeColor:"#C62F75",trailColor:"#fff",percent:100*v/p,strokeLinecap:"square",type:"line",showInfo:!1,className:M("progress")}),Object(A.jsxs)("div",{className:M("panels"),children:[Object(A.jsxs)("div",{className:M("panel"),children:[Object(A.jsx)("div",{className:M("title"),children:"Mobi Balance"}),Object(A.jsx)("div",{className:M("num"),children:new _.a(c.mobiNum).toFormat(0)})]}),Object(A.jsxs)("div",{className:M("panel"),children:[Object(A.jsxs)("div",{className:M("title"),children:["Potential Reward ",Object(A.jsx)("br",{}),"This Epoch"]}),Object(A.jsx)("div",{className:M("num"),children:K})]}),Object(A.jsxs)("div",{className:M("panel"),children:[Object(A.jsx)("div",{className:M("title"),children:"Current Reward"}),Object(A.jsx)("div",{className:M("num"),children:q})]})]}),Object(A.jsxs)("div",{className:M("pools-detail"),children:[Object(A.jsxs)("div",{className:M("tabs"),children:[Object(A.jsx)("div",{className:M("tab"),onClick:function(){return H(0)},children:"Pooled Rune"}),Object(A.jsx)("div",{className:M("tab"),onClick:function(){return H(1)},children:"My Rune"})]}),Object(A.jsxs)("table",{className:M("table"),children:[Object(A.jsx)("thead",{className:M("thead"),children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{children:"ID"}),Object(A.jsx)("th",{children:"Score"}),Object(A.jsx)("th",{})]})}),Object(A.jsx)("tbody",{children:null===Z||void 0===Z?void 0:Z.map((function(e){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:e.pid}),Object(A.jsx)("td",{children:e.score}),Object(A.jsx)("td",{children:te?0===X?Object(A.jsx)(u.a,{loading:Oe,onClick:function(){return pe(e.id)},className:M("btn"),children:"Unstake"}):Object(A.jsx)(u.a,{loading:je,className:M("btn"),onClick:function(){return be(e.id)},children:"Stake"}):Object(A.jsx)(u.a,{className:M("btn"),onClick:oe,loading:re,children:"Approve"})})]},e.pid+e.id)}))})]})]}),Object(A.jsxs)("div",{className:M("daily-renarcl"),children:[Object(A.jsx)("div",{className:M("title"),children:"Daily Reward"}),Object(A.jsx)("div",{className:M("total-num"),children:new _.a(w).toFormat(0)}),Object(A.jsxs)("div",{className:M("content"),children:[Object(A.jsxs)("div",{className:M("item"),children:[Object(A.jsx)("div",{className:M("txt"),children:"Pooled Total Score"}),Object(A.jsx)("div",{className:M("num"),children:new _.a(N).toFormat(0)})]}),Object(A.jsxs)("div",{className:M("item"),children:[Object(A.jsx)("div",{className:M("txt"),children:"Pooled Effective Score"}),Object(A.jsx)("div",{className:M("num"),children:new _.a(F).toFormat(0)})]}),Object(A.jsxs)("div",{className:M("item"),children:[Object(A.jsx)("div",{className:M("txt"),children:"My Pooled Score"}),Object(A.jsx)("div",{className:M("num"),children:Q})]}),Object(A.jsxs)("div",{className:M("item"),children:[Object(A.jsx)("div",{className:M("txt"),children:"My Effective Score"}),Object(A.jsx)("div",{className:M("num"),children:new _.a(U).toFormat(0)})]})]})]}),Object(A.jsx)("div",{className:M("claim-reward-container"),children:Object(A.jsxs)(u.a,{className:M("btn"),loading:D,onClick:J,children:[Object(A.jsx)(x,{className:M("icon")}),"CLAIM REWARD"]})})]})})}},911:function(e,t,a){e.exports={"staking-container":"Staking_staking-container__3gGQW",mobile:"Staking_mobile__2nKKq",img:"Staking_img__1G82Z","progress-info":"Staking_progress-info__2774E",panels:"Staking_panels__1XgYV",panel:"Staking_panel__3E8Q7",title:"Staking_title__1exwG",num:"Staking_num__2LM4r","pools-detail":"Staking_pools-detail__3bL7o",tabs:"Staking_tabs__21wBu",tab:"Staking_tab__3TU29",table:"Staking_table__1Q55s",btn:"Staking_btn__2mMCa","daily-renarcl":"Staking_daily-renarcl__zUFlD","total-num":"Staking_total-num__1aDcG",content:"Staking_content__2o--C",item:"Staking_item__3TAs4","claim-reward-container":"Staking_claim-reward-container__1zM6A",icon:"Staking_icon__KzXDP"}}}]);