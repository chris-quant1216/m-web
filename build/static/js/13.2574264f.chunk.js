(this["webpackJsonpthumbshot-fe"]=this["webpackJsonpthumbshot-fe"]||[]).push([[13],{1042:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(1040),s=a(81),r=a(51),i=a.n(r),o=a(10),l=a.n(o),d=a(19),u=a(76),j=a(49),b=a(169),m=a(220),h=a(40),p=a(167),v=a(909),O=a(36),f=a(153),x=a(27),g=a.n(x),k=a(420),_=function(){var e=Object(j.c)().account,t=Object(m.a)(),a=Object(p.a)(),n=a.assets,s=a.runeList,r=Object(h.i)().id,i=Number(r),o=Object(v.b)(i),x=o.epoch,_=o.totalEpoch,N=o.userData,S=o.totalScore,w=o.epochReward,y=o.contractAddress,R=o.effectiveScore,F=function(e){var t=Object(m.a)();return Object(c.useMemo)((function(){return Object(b.c)(e,t)}),[e,t])}(Object(O.a)(y)),C=Object(v.a)(F).onReward,A=Object(v.d)(F).onStake,E=Object(v.e)(F).onUnstake,L=new g.a(n.mobiNum).toFormat(0),M=new g.a(w).toFormat(0),P=new g.a(S).toFormat(0),q=new g.a(R).toFormat(0),D=Object(f.d)((null===N||void 0===N?void 0:N.effectiveScore)?new g.a(N.effectiveScore):f.b,0),B=new g.a(D).toFormat(0),U=S>0?new g.a(D).dividedBy(R).multipliedBy(w).toFormat(0):0,I=Object(f.c)(new g.a((null===N||void 0===N?void 0:N.poolScore)||f.b),0),T=Object(f.c)(new g.a((null===N||void 0===N?void 0:N.pendingReward)||f.b),18),H=Object(c.useState)(!1),Y=Object(u.a)(H,2),z=Y[0],G=Y[1],Q=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,G(!0),e.next=4,C();case 4:e.sent?(k.a.success({message:"You can now stake pool",className:"notification-success"}),G(!1)):(k.a.error({message:"error",description:"Please try again. Confirm the transaction and make sure you are paying enough gas!"}),G(!1)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),G(!1),k.a.error({message:null===e.t0||void 0===e.t0?void 0:e.t0.message,className:"notification-error"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),J=Object(c.useState)(0),V=Object(u.a)(J,2),X=V[0],K=V[1],W=Object(c.useMemo)((function(){return 0===X?(null===N||void 0===N?void 0:N.poolRunes)||[]:(s||[]).filter((function(e){return+e.score>=+o.sousId}))}),[X,s,null===N||void 0===N?void 0:N.poolRunes]),Z=Object(c.useState)(!1),$=Object(u.a)(Z,2),ee=$[0],te=$[1],ae=function(){var t=Object(d.a)(l.a.mark((function t(){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(O.a)(y),t.next=3,Object(b.a)().methods.isApprovedForAll(e,a).call();case 3:c=t.sent,te(c);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ce=Object(c.useState)(!1),ne=Object(u.a)(ce,2),se=ne[0],re=ne[1],ie=function(){var a=Object(d.a)(l.a.mark((function a(){var c;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,re(!0),c=Object(O.a)(y),a.next=5,Object(b.a)(t).methods.setApprovalForAll(c,!0).send({from:e,gas:5e6});case 5:return a.next=7,ae();case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),k.a.error({message:null===a.t0||void 0===a.t0?void 0:a.t0.message,className:"notification-error"});case 12:return a.prev=12,re(!1),a.finish(12);case 15:case"end":return a.stop()}}),a,null,[[0,9,12,15]])})));return function(){return a.apply(this,arguments)}}();Object(c.useEffect)((function(){e&&Object(O.a)(y)&&ae()}),[e,y]);var oe=Object(c.useState)(!1),le=Object(u.a)(oe,2),de=le[0],ue=le[1],je=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ue(!0),e.next=4,A(t);case 4:ue(!1),k.a.success({message:"stake success",className:"notification-success"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),ue(!1),k.a.error({message:"error",description:"Please try again. Confirm the transaction and make sure you are paying enough gas!",className:"notification-error"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),be=Object(c.useState)(!1),me=Object(u.a)(be,2),he=me[0],pe=me[1];return{isApproved:ee,requestedApprove:se,handleApprove:ie,requestedHarvest:z,handleHarvest:Q,requestedStake:de,handleStake:je,requestedUnstake:he,handleUnstake:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,pe(!0),e.next=4,E(t);case 4:pe(!1),k.a.success({message:"unStake success",className:"notification-success"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),pe(!1),k.a.error({message:"error",description:"Please try again. Confirm the transaction and make sure you are paying enough gas!",className:"notification-error"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),onTabClick:function(e){K(e)},currentRuneList:W,currentIdx:X,potentialReward:U,userPoolScore:I,pendingReward:T,epoch:x,totalEpoch:_,mobiBalanceFormat:L,epochRewardFormat:M,totalScoreFormat:P,userEffectiveScoreFormat:B,effectiveScoreFormat:q}},N=a.p+"static/media/rune-mobi.7956ced6.webp",S=a(921),w=a.n(S),y=a(12),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"},F=a(26),C=function(e,t){return c.createElement(F.a,Object(y.a)(Object(y.a)({},e),{},{ref:t,icon:R}))};C.displayName="ArrowDownOutlined";var A=c.forwardRef(C),E=a(2),L=i.a.bind(w.a);t.default=function(){var e=_(),t=e.epoch,a=e.totalEpoch,c=e.mobiBalanceFormat,r=e.potentialReward,i=e.pendingReward,o=e.requestedHarvest,l=e.handleHarvest,d=e.onTabClick,u=e.currentRuneList,j=e.currentIdx,b=e.isApproved,m=e.handleApprove,h=e.requestedApprove,p=e.handleStake,v=e.requestedStake,O=e.handleUnstake,f=e.requestedUnstake,x=e.effectiveScoreFormat,g=e.epochRewardFormat,k=e.totalScoreFormat,S=e.userEffectiveScoreFormat,w=e.userPoolScore;return Object(E.jsxs)("div",{className:L("pc-staking-container"),children:[Object(E.jsxs)("div",{className:L("header-container"),children:[Object(E.jsx)("img",{src:N,alt:""}),Object(E.jsxs)("div",{className:L("header-right"),children:[Object(E.jsx)("div",{className:L("tip"),children:"Epoch"}),Object(E.jsxs)("div",{children:[Object(E.jsx)("strong",{children:t}),Object(E.jsxs)("span",{children:["/",a]})]})]})]}),Object(E.jsx)("div",{className:L("progress-container"),children:Object(E.jsx)(n.a,{strokeColor:"#C62F75",trailColor:"#fff",percent:100*t/a,strokeLinecap:"square",type:"line",showInfo:!1})}),Object(E.jsxs)("div",{className:L("panels"),children:[Object(E.jsxs)("div",{className:L("panel"),children:[Object(E.jsx)("div",{className:L("title"),children:"Mobi Balance"}),Object(E.jsx)("div",{className:L("num"),children:c})]}),Object(E.jsxs)("div",{className:L("panel"),children:[Object(E.jsxs)("div",{className:L("title"),children:["Potential Reward ",Object(E.jsx)("br",{}),"This Epoch"]}),Object(E.jsx)("div",{className:L("num"),children:r})]}),Object(E.jsxs)("div",{className:L("panel"),children:[Object(E.jsx)("div",{className:L("title"),children:"Current Reward"}),Object(E.jsx)("div",{className:L("num"),children:i})]}),Object(E.jsx)("div",{className:L("panel"),children:Object(E.jsxs)(s.a,{className:L("claim-btn"),loading:o,onClick:l,children:[Object(E.jsx)(A,{className:L("icon")}),Object(E.jsx)("span",{children:"CLAIM REWARD"})]})})]}),Object(E.jsxs)("div",{className:L("table-content"),children:[Object(E.jsxs)("div",{className:L("pools-detail"),children:[Object(E.jsxs)("div",{className:L("tabs"),children:[Object(E.jsx)("div",{className:L("tab"),onClick:function(){return d(0)},children:"Pooled Rune"}),Object(E.jsx)("div",{className:L("tab"),onClick:function(){return d(1)},children:"My Rune"})]}),Object(E.jsxs)("table",{className:L("table"),children:[Object(E.jsx)("thead",{className:L("thead"),children:Object(E.jsxs)("tr",{children:[Object(E.jsx)("th",{children:"ID"}),Object(E.jsx)("th",{children:"Score"}),Object(E.jsx)("th",{})]})}),Object(E.jsx)("tbody",{children:null===u||void 0===u?void 0:u.map((function(e){return Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{children:e.pid}),Object(E.jsx)("td",{children:e.score}),Object(E.jsx)("td",{children:b?0===j?Object(E.jsx)(s.a,{loading:f,onClick:function(){return O(e.id)},className:L("btn"),children:"Unstake"}):Object(E.jsx)(s.a,{loading:v,className:L("btn"),onClick:function(){return p(e.id)},children:"Stake"}):Object(E.jsx)(s.a,{className:L("btn"),onClick:m,loading:h,children:"Approve"})})]},e.pid+e.id)}))})]})]}),Object(E.jsxs)("div",{className:L("daily-renarcl"),children:[Object(E.jsx)("div",{className:L("title"),children:"Daily Reward"}),Object(E.jsx)("div",{className:L("total-num"),children:g}),Object(E.jsxs)("div",{className:L("content"),children:[Object(E.jsxs)("div",{className:L("item"),children:[Object(E.jsx)("div",{className:L("txt"),children:"Pooled Total Score"}),Object(E.jsx)("div",{className:L("num"),children:k})]}),Object(E.jsxs)("div",{className:L("item"),children:[Object(E.jsx)("div",{className:L("txt"),children:"Pooled Effective Score"}),Object(E.jsx)("div",{className:L("num"),children:x})]}),Object(E.jsxs)("div",{className:L("item"),children:[Object(E.jsx)("div",{className:L("txt"),children:"My Pooled Score"}),Object(E.jsx)("div",{className:L("num"),children:w})]}),Object(E.jsxs)("div",{className:L("item"),children:[Object(E.jsx)("div",{className:L("txt"),children:"My Effective Score"}),Object(E.jsx)("div",{className:L("num"),children:S})]})]})]})]})]})}},921:function(e,t,a){e.exports={"pc-staking-container":"Staking_pc-staking-container__3YYoQ","header-container":"Staking_header-container__3kwDx","header-right":"Staking_header-right__2Aj1M",tip:"Staking_tip__2cZfh","progress-container":"Staking_progress-container__3tEIn",panels:"Staking_panels__1XgYV",panel:"Staking_panel__3E8Q7",title:"Staking_title__1exwG",num:"Staking_num__2LM4r","claim-btn":"Staking_claim-btn__6vGBp",icon:"Staking_icon__KzXDP","table-content":"Staking_table-content__1lx-4","pools-detail":"Staking_pools-detail__3bL7o",tabs:"Staking_tabs__21wBu",tab:"Staking_tab__3TU29",table:"Staking_table__1Q55s",btn:"Staking_btn__2mMCa","daily-renarcl":"Staking_daily-renarcl__zUFlD","total-num":"Staking_total-num__1aDcG",content:"Staking_content__2o--C",item:"Staking_item__3TAs4"}}}]);